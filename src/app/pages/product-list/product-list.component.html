<div class="product-list-container">
  <!-- Header Section -->
  <section class="page-header">
    <h1>Notre Marketplace</h1>
    <p>D√©couvrez {{ products.length }} produits exceptionnels de nos vendeurs</p>
  </section>

  <!-- Controls Bar -->
  <section class="controls-bar">
    <div class="controls-left">
      <button (click)="toggleFilters()" class="filters-toggle-btn">
        üéõÔ∏è Filtres 
        <span *ngIf="activeFilterCount > 0" class="filter-badge">
          {{ activeFilterCount }}
        </span>
      </button>
      
      <div class="layout-toggle">
        <button 
          (click)="onLayoutChange('grid')" 
          [class.active]="layout === 'grid'"
          class="layout-btn"
          title="Vue grille"
        >
          ‚ñ¶
        </button>
        <button 
          (click)="onLayoutChange('list')" 
          [class.active]="layout === 'list'"
          class="layout-btn"
          title="Vue liste"
        >
          ‚ò∞
        </button>
      </div>
    </div>

    <div class="controls-right">
      <div class="sort-control">
        <label>Trier par :</label>
        <select (change)="onSortChange($event)" class="sort-select">
          <option value="name">Nom A-Z</option>
          <option value="price">Prix croissant</option>
          <option value="rating">Meilleures notes</option>
          <option value="newest">Plus r√©cents</option>
        </select>
      </div>

      <div class="results-count">
        {{ filteredProducts.length }} produit(s)
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Filters Sidebar -->
    <aside class="filters-sidebar" [class.show]="showFilters">
      <div class="filters-header">
        <h3>Filtres</h3>
        <button (click)="resetFilters()" class="reset-filters-btn">
          Tout effacer
        </button>
        <button (click)="toggleFilters()" class="close-filters-btn">
          √ó
        </button>
      </div>

      <!-- Search -->
      <div class="filter-group">
        <label>Recherche</label>
        <input 
          type="text" 
          placeholder="Rechercher un produit..." 
          [value]="searchTerm"
          (input)="onSearchChange($event)"
          class="search-input"
        >
      </div>

      <!-- Category Filter -->
      <div class="filter-group">
        <label>Cat√©gorie</label>
        <div class="filter-options">
          <button 
            *ngFor="let category of categories" 
            [class.active]="selectedCategory === category"
            (click)="onCategoryChange(category)"
            class="filter-option"
          >
            {{ category }}
          </button>
        </div>
      </div>

      <!-- Brand Filter -->
      <div class="filter-group">
        <label>Marque</label>
        <div class="filter-options">
          <button 
            *ngFor="let brand of brands" 
            [class.active]="selectedBrand === brand"
            (click)="onBrandChange(brand)"
            class="filter-option"
          >
            {{ brand }}
          </button>
        </div>
      </div>

      <!-- Price Range -->
      <div class="filter-group">
        <label>Prix : {{ priceRange.min }}‚Ç¨ - {{ priceRange.max }}‚Ç¨</label>
        <div class="price-inputs">
          <input 
            type="number" 
            [value]="priceRange.min"
            (change)="priceRange.min = +$any($event.target).value; onPriceRangeChange()"
            min="0"
            class="price-input"
            placeholder="Min"
          >
          <span>-</span>
          <input 
            type="number" 
            [value]="priceRange.max"
            (change)="priceRange.max = +$any($event.target).value; onPriceRangeChange()"
            max="10000"
            class="price-input"
            placeholder="Max"
          >
        </div>
      </div>

      <!-- Rating Filter -->
      <div class="filter-group">
        <label>Note minimum</label>
        <div class="rating-filter">
          <button 
            *ngFor="let rating of [4, 3, 2, 1, 0]" 
            [class.active]="minRating === rating"
            (click)="onRatingChange(rating)"
            class="rating-option"
          >
            <span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
            <span>{{ rating }}+</span>
          </button>
        </div>
      </div>

      <!-- Stock Filter -->
      <div class="filter-group">
        <label class="checkbox-label">
          <input 
            type="checkbox" 
            [checked]="inStockOnly"
            (change)="onStockFilterChange()"
          >
          En stock seulement
        </label>
      </div>
    </aside>

    <!-- Products Grid -->
    <main class="products-main">
      <!-- Loading State -->
      <div *ngIf="isLoading" class="loading-state">
        <div class="loading-spinner"></div>
        <p>Chargement des produits...</p>
      </div>

      <!-- Products Grid -->
      <div *ngIf="!isLoading" class="products-container">
        <div 
          [class.grid-layout]="layout === 'grid'" 
          [class.list-layout]="layout === 'list'"
          class="products-grid"
        >
          <app-product-card
            *ngFor="let product of filteredProducts"
            [product]="product"
            [layout]="layout"
            [showActions]="true"
            (addToCart)="quickAddToCart($event)"
            class="product-card-item"
          ></app-product-card>
        </div>

        <!-- No Products Message -->
        <div *ngIf="filteredProducts.length === 0 && !isLoading" class="no-products">
          <div class="no-products-icon">üîç</div>
          <h3>Aucun produit trouv√©</h3>
          <p>Essayez de modifier vos crit√®res de recherche ou</p>
          <button (click)="resetFilters()" class="reset-filters-main-btn">
            R√©initialiser tous les filtres
          </button>
        </div>
      </div>
    </main>
  </div>
</div>